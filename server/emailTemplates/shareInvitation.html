<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Records Shared With You</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo {
            max-width: 180px;
            margin-bottom: 20px;
        }
        .patient-name {
            font-size: 24px;
            font-weight: 600;
            color: #1A1A1A;
            margin: 0;
        }
        .subtitle {
            font-size: 16px;
            color: #666666;
            margin-top: 8px;
        }
        .otp-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
            border: 1px solid #bae6fd;
        }
        .otp-label {
            font-size: 14px;
            color: #0369a1;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .otp-code {
            font-family: 'Courier New', monospace;
            font-size: 42px;
            font-weight: 700;
            color: #0284c7;
            letter-spacing: 12px;
            margin: 0;
            padding: 15px 0;
        }
        .otp-note {
            font-size: 13px;
            color: #64748b;
            margin-top: 15px;
        }
        .button-container {
            text-align: center;
            margin: 30px 0;
        }
        .button {
            display: inline-block;
            background-color: #4DACF2;
            color: #ffffff !important;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        .button:hover {
            background-color: #3b97dc;
        }
        .expiration-warning {
            background-color: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            padding: 16px;
            margin: 25px 0;
            text-align: center;
        }
        .expiration-icon {
            font-size: 20px;
            margin-right: 8px;
        }
        .expiration-text {
            color: #92400e;
            font-size: 14px;
            margin: 0;
        }
        .security-notice {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border-left: 4px solid #4DACF2;
        }
        .security-title {
            font-size: 14px;
            font-weight: 600;
            color: #1A1A1A;
            margin: 0 0 10px 0;
        }
        .security-text {
            font-size: 13px;
            color: #64748b;
            margin: 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        .footer-text {
            font-size: 12px;
            color: #94a3b8;
            margin: 0;
        }
        .footer-link {
            color: #4DACF2;
            text-decoration: none;
        }
        @media only screen and (max-width: 480px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 25px;
            }
            .otp-code {
                font-size: 32px;
                letter-spacing: 8px;
            }
            .button {
                padding: 14px 30px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="{{logoUrl}}" alt="Vista RX MD" class="logo">
            <h1 class="patient-name">{{patientName}}</h1>
            <p class="subtitle">has shared their medical records with you</p>
        </div>

        {{#if recipientName}}
        <p>Hello {{recipientName}},</p>
        {{else}}
        <p>Hello,</p>
        {{/if}}

        <p>You have been granted secure access to view medical records. Use the verification code below to access the records.</p>

        <div class="otp-section">
            <p class="otp-label">Your Verification Code</p>
            <p class="otp-code">{{otpSpaced}}</p>
            <p class="otp-note">Enter this code when prompted</p>
        </div>

        <div class="button-container">
            <a href="{{accessUrl}}" class="button">View Medical Records</a>
        </div>

        <div class="expiration-warning">
            <p class="expiration-text">
                <span class="expiration-icon">&#9200;</span>
                This access link expires in <strong>24 hours</strong> ({{expiresAtFormatted}})
            </p>
        </div>

        <div class="security-notice">
            <p class="security-title">Security Notice</p>
            <p class="security-text">
                This code is confidential. Do not share it with anyone. If you did not expect to receive this email, please disregard it. The patient who shared these records can revoke access at any time.
            </p>
        </div>

        <div class="footer">
            <p class="footer-text">
                This email was sent by Vista RX MD on behalf of {{patientName}}.
                <br>
                <a href="{{siteUrl}}" class="footer-link">Vista RX MD</a> | Secure Medical Records Sharing
            </p>
        </div>
    </div>
</body>
</html>
